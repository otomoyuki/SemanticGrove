/* 記憶の巨大樹 - スタイル (Phase 1対応) */
body {
    margin-left: 200px;
}

@media (max-width: 1024px) {
    body {
        margin-left: 80px;
    }
}

@media (max-width: 768px) {
    body {
        margin-left: 60px;
    }
}
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(to bottom, #2c5f4d 0%, #1a3a2e 100%);
    color: #e8f5e9;
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
}

/* 背景：巨大な樹のシルエット */
.tree-background {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    height: 100vh;
    background: 
        radial-gradient(ellipse at bottom, rgba(76, 175, 80, 0.1) 0%, transparent 50%),
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><path d="M100 250 L100 150 Q80 140 70 120 Q60 100 65 80 Q70 60 85 50 L100 40 L115 50 Q130 60 135 80 Q140 100 130 120 Q120 140 100 150 L100 250 M100 150 Q110 145 120 140 M100 150 Q90 145 80 140" fill="none" stroke="rgba(139, 195, 74, 0.15)" stroke-width="3"/></svg>') no-repeat center bottom;
    background-size: 600px 800px;
    pointer-events: none;
    z-index: 0;
}

/* ヘッダー */
.header {
    position: sticky;
    top: 0;
    background: rgba(26, 58, 46, 0.95);
    backdrop-filter: blur(10px);
    padding: 20px 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    z-index: 100;
}

.back-btn {
    color: #a5d6a7;
    text-decoration: none;
    font-size: 1rem;
    transition: color 0.3s;
}

.back-btn:hover {
    color: #81c784;
}

.title {
    font-size: 2rem;
    font-weight: bold;
    color: #c8e6c9;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
}

.sg-balance {
    background: rgba(255, 235, 59, 0.2);
    padding: 8px 20px;
    border-radius: 20px;
    font-weight: bold;
    color: #fff59d;
    font-size: 1.1rem;
}

/* コンテナ */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
    position: relative;
    z-index: 1;
}

/* イントロセクション */
.intro-section {
    text-align: center;
    margin-bottom: 40px;
}

.intro-text {
    font-size: 1.2rem;
    line-height: 1.8;
    color: #c8e6c9;
}

.intro-text strong {
    color: #fff59d;
    font-weight: bold;
}

/* タブ */
.tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.tab {
    flex: 1;
    min-width: 150px;
    padding: 15px 25px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    border-radius: 10px;
    color: #a5d6a7;
    font-size: 1.5rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
}

.tab:hover {
    background: rgba(255, 255, 255, 0.15);
}

.tab.active {
    background: linear-gradient(135deg, #66bb6a 0%, #43a047 100%);
    color: white;
    box-shadow: 0 4px 16px rgba(76, 175, 80, 0.4);
}

/* タブコンテンツ */
.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.5s;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* フィルター */
.filters {
    display: flex;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.filter-group {
    display: flex;
    align-items: center;
    gap: 10px;
}

.filter-group label {
    color: #c8e6c9;
    font-weight: bold;
}

.filter-group select {
    padding: 10px 15px;
    background: rgba(255, 255, 255, 0.15);
    border: 2px solid rgba(129, 199, 132, 0.3);
    border-radius: 8px;
    color: #e8f5e9;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s;
}

.filter-group select:focus {
    outline: none;
    border-color: #81c784;
    background: rgba(255, 255, 255, 0.2);
}

.filter-group select option {
    background: #1a3a2e;
    color: #e8f5e9;
}

/* 投稿グリッド */
.posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 25px;
}

.loading {
    grid-column: 1 / -1;
    text-align: center;
    padding: 60px;
    font-size: 1.2rem;
    color: #a5d6a7;
}

/* 投稿カード */
.post-card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s;
    border: 2px solid transparent;
}

.post-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 32px rgba(76, 175, 80, 0.3);
    border-color: rgba(129, 199, 132, 0.5);
}

.post-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    background: rgba(0, 0, 0, 0.2);
}

.post-content {
    padding: 25px;
}

.post-type-badge {
    display: inline-block;
    padding: 5px 12px;
    background: rgba(33, 150, 243, 0.3);
    border-radius: 12px;
    font-size: 0.75rem;
    color: #bbdefb;
    margin-bottom: 10px;
}

.post-category {
    display: inline-block;
    padding: 5px 15px;
    background: rgba(76, 175, 80, 0.3);
    border-radius: 15px;
    font-size: 0.85rem;
    color: #c8e6c9;
    margin-bottom: 15px;
    margin-left: 8px;
}

.post-title {
    font-size: 1.4rem;
    font-weight: bold;
    color: #c8e6c9;
    margin-bottom: 15px;
}

.post-preview {
    color: #a5d6a7;
    line-height: 1.6;
    margin-bottom: 15px;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.post-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.9rem;
    color: #81c784;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid rgba(129, 199, 132, 0.2);
}

.post-date {
    display: flex;
    align-items: center;
    gap: 5px;
}

.post-likes {
    display: flex;
    align-items: center;
    gap: 5px;
}

/* 公式ストーリー */
.official-stories {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 25px;
}

.story-card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    padding: 25px;
    position: relative;
}

.story-card.official {
    border: 2px solid rgba(255, 193, 7, 0.5);
}

.story-badge {
    position: absolute;
    top: 15px;
    right: 15px;
    background: linear-gradient(135deg, #ffd54f 0%, #ffb300 100%);
    color: #1a3a2e;
    padding: 5px 15px;
    border-radius: 15px;
    font-size: 0.85rem;
    font-weight: bold;
}

.story-card h3 {
    font-size: 1.5rem;
    color: #fff9c4;
    margin-bottom: 15px;
}

.story-preview {
    color: #a5d6a7;
    line-height: 1.6;
    margin-bottom: 20px;
}

.read-more {
    background: linear-gradient(135deg, #66bb6a 0%, #43a047 100%);
    color: white;
    border: none;
    padding: 10px 25px;
    border-radius: 20px;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s;
}

.read-more:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(76, 175, 80, 0.4);
}

/* 投稿フォーム */
.post-form {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    padding: 40px;
    max-width: 800px;
    margin: 0 auto;
}

.form-group {
    margin-bottom: 25px;
}

.form-group label {
    display: block;
    color: #c8e6c9;
    font-size: 1.1rem;
    font-weight: bold;
    margin-bottom: 10px;
}

/* ===== フォーム要素デフォルトスタイル ===== */
.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 15px;
    border: 2px solid rgba(129, 199, 132, 0.3);
    border-radius: 10px;
    font-size: 1rem;
    font-family: inherit;
    transition: all 0.3s;
}

.form-group textarea {
    resize: vertical;
    min-height: 200px;
}

/* ===== Phase 1.5: フォーム要素完全修正版 ===== */

/* セレクトボックス（カテゴリー・投稿タイプ） */
.form-group select {
    /* 閉じている時: 透明 + 白文字 */
    background: transparent !important;
    color: #ffffff !important;
    border: 2px solid rgba(255, 255, 255, 0.3) !important;
    padding: 12px 40px 12px 15px !important;
    font-size: 1rem !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    
    /* ドロップダウン矢印 */
    appearance: none !important;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23ffffff' d='M6 9L1 4h10z'/%3E%3C/svg%3E") !important;
    background-repeat: no-repeat !important;
    background-position: right 15px center !important;
}

.form-group select:hover {
    border-color: rgba(255, 255, 255, 0.6) !important;
    background-color: rgba(255, 255, 255, 0.05) !important;
}

.form-group select:focus {
    /* 開いている時: 白背景 + 濃い文字 */
    background-color: #ffffff !important;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%231a3a2e' d='M6 9L1 4h10z'/%3E%3C/svg%3E") !important;
    color: #1a3a2f !important;
    border-color: #4ade80 !important;
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.2) !important;
}

.form-group select option {
    background: #ffffff !important;
    color: #1a3a2f !important;
    padding: 12px !important;
}

.form-group select option:hover {
    background: #f0fdf4 !important;
}

.form-group select option:checked {
    background: #4ade80 !important;
    color: #ffffff !important;
}

.form-group select option[value=""],
.form-group select option:disabled {
    color: #9ca3af !important;
}

/* インプット（タイトル） */
.form-group input[type="text"] {
    background: rgba(255, 255, 255, 0.95) !important;
    color: #1a3a2f !important;
    border: 2px solid rgba(200, 230, 201, 0.4) !important;
    padding: 12px 15px !important;
    font-size: 1rem !important;
    transition: all 0.3s ease !important;
}

.form-group input[type="text"]:hover {
    border-color: rgba(200, 230, 201, 0.7) !important;
}

.form-group input[type="text"]:focus {
    background: #ffffff !important;
    border-color: #4ade80 !important;
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.2) !important;
}

.form-group input[type="text"]::placeholder {
    color: #6b7280 !important;
    opacity: 1 !important;
}

/* テキストエリア（本文） */
.form-group textarea {
    background: rgba(255, 255, 255, 0.95) !important;
    color: #1a3a2f !important;
    border: 2px solid rgba(200, 230, 201, 0.4) !important;
    padding: 15px !important;
    font-size: 1rem !important;
    line-height: 1.6 !important;
    transition: all 0.3s ease !important;
}

.form-group textarea:hover {
    border-color: rgba(200, 230, 201, 0.7) !important;
}

.form-group textarea:focus {
    background: #ffffff !important;
    border-color: #4ade80 !important;
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.2) !important;
}

.form-group textarea::placeholder {
    color: #6b7280 !important;
    opacity: 1 !important;
}

/* ファイルアップロード */
.form-group input[type="file"] {
    padding: 12px !important;
    background: rgba(255, 255, 255, 0.95) !important;
    border: 2px dashed rgba(200, 230, 201, 0.4) !important;
    border-radius: 8px !important;
    color: #1a3a2f !important;
    cursor: pointer !important;
}

.form-group input[type="file"]:hover {
    border-color: #4ade80 !important;
    background: #ffffff !important;
}

.char-count {
    text-align: right;
    color: #a5d6a7;
    font-size: 0.9rem;
    margin-top: 5px;
}

/* 画像アップロードエリア */
.image-upload-area {
    position: relative;
}

.image-upload-area input[type="file"] {
    position: absolute;
    opacity: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
    z-index: 2;
}

.upload-placeholder {
    border: 3px dashed rgba(129, 199, 132, 0.5);
    border-radius: 10px;
    padding: 60px 20px;
    text-align: center;
    background: rgba(255, 255, 255, 0.05);
    transition: all 0.3s;
}

.upload-placeholder:hover {
    border-color: #81c784;
    background: rgba(255, 255, 255, 0.1);
}

.upload-icon {
    font-size: 4rem;
    margin-bottom: 15px;
}

.upload-placeholder p {
    color: #c8e6c9;
    margin: 5px 0;
}

.upload-note {
    font-size: 0.85rem;
    color: #a5d6a7;
}

.upload-note-small {
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.6);
    margin-top: 5px;
}

.image-preview {
    position: relative;
    border-radius: 10px;
    overflow: hidden;
}

.image-preview img {
    width: 100%;
    max-height: 400px;
    object-fit: contain;
    background: rgba(0, 0, 0, 0.5);
}

.remove-image {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(244, 67, 54, 0.9);
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
}

.remove-image:hover {
    background: #f44336;
    transform: scale(1.05);
}

.form-actions {
    text-align: center;
    margin-top: 30px;
}

.submit-btn {
    background: linear-gradient(135deg, #66bb6a 0%, #43a047 100%);
    color: white;
    border: none;
    padding: 18px 50px;
    border-radius: 30px;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 16px rgba(76, 175, 80, 0.4);
}

.submit-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 24px rgba(76, 175, 80, 0.6);
}

.submit-btn:active {
    transform: translateY(-1px);
}

.submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.form-note {
    text-align: center;
    color: #a5d6a7;
    font-size: 0.9rem;
    margin-top: 20px;
    line-height: 1.6;
}

/* モーダル */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
}

.modal.show {
    display: flex;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s;
}

.modal-content {
    background: linear-gradient(135deg, #2c5f4d 0%, #1a3a2e 100%);
    padding: 40px;
    border-radius: 20px;
    max-width: 900px;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

.close {
    position: absolute;
    top: 15px;
    right: 25px;
    font-size: 2rem;
    color: #a5d6a7;
    cursor: pointer;
    transition: color 0.3s;
}

.close:hover {
    color: #81c784;
}

.modal-image {
    width: 100%;
    max-height: 500px;
    object-fit: contain;
    border-radius: 10px;
    margin-bottom: 20px;
    background: rgba(0, 0, 0, 0.3);
}

#modalContent h2,
#storyContent h2 {
    color: #c8e6c9;
    margin-bottom: 20px;
}

#modalContent p,
#storyContent p {
    color: #a5d6a7;
    line-height: 1.8;
    margin-bottom: 15px;
}

/* 成功メッセージ */
.success-message {
    position: fixed;
    top: 100px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #66bb6a 0%, #43a047 100%);
    color: white;
    padding: 20px 40px;
    border-radius: 30px;
    font-size: 1.2rem;
    font-weight: bold;
    box-shadow: 0 8px 32px rgba(76, 175, 80, 0.6);
    z-index: 2000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
}

.success-message.show {
    opacity: 1;
    animation: slideDown 0.5s ease;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* レスポンシブ */
@media (max-width: 768px) {
    .header {
        flex-direction: column;
        gap: 15px;
        padding: 15px 20px;
    }

    .title {
        font-size: 1.5rem;
    }

    .filters {
        flex-direction: column;
    }

    .posts-grid,
    .official-stories {
        grid-template-columns: 1fr;
    }

    .post-form {
        padding: 25px;
    }

    .modal-content {
        padding: 30px 20px;
        margin: 20px;
    }
}

/* ===== ⚠️ 警告ボックス（Phase 1.5追加） ===== */

.warning-box {
    background: linear-gradient(135deg, #fff3cd 0%, #fff8e1 100%);
    border: 3px solid #ffc107;
    border-radius: 15px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: 0 4px 16px rgba(255, 193, 7, 0.3);
    animation: fadeInDown 0.5s ease;
}

@keyframes fadeInDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.warning-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 18px;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(255, 193, 7, 0.3);
}

.warning-icon {
    font-size: 2.0em;
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1);
    }
}

.warning-header h3 {
    color: #f57c00;
    text-align: center;
    font-size: 1.8em;
    font-weight: bold;
}

.warning-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.warning-list li {
    padding: 12px 0;
    color: #5d4037;
    text-align: center;
    font-size: 1.5rem;
    line-height: 1.6;
    border-bottom: 1px solid rgba(255, 193, 7, 0.15);
    transition: all 0.3s;
}

.warning-list li:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.warning-list li:hover {
    padding-left: 10px;
    color: #3e2723;
}

.warning-list li strong {
    color: #d84315;
    font-weight: bold;
    background: rgba(255, 87, 34, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
}

.warning-list li small {
    display: block;
    margin-top: 8px;
    margin-left: 20px;
    color: #795548;
    font-size: 0.9em;
    font-style: italic;
}

/* レスポンシブ対応 */
@media (max-width: 768px) {
    .warning-box {
        padding: 20px;
        margin-bottom: 25px;
    }

    .warning-icon {
        font-size: 2em;
    }

    .warning-header h3 {
        font-size: 1.1em;
    }

    .warning-list li {
        font-size: 0.95rem;
        padding: 10px 0;
    }

    .warning-list li small {
        margin-left: 15px;
        font-size: 0.85em;
    }
}