import sqlite3
import json

DB_NAME = "SemanticGrove.db"

def add_python_batch2():
    """Pythonå•é¡Œè¿½åŠ ï¼ˆç¬¬2å¼¾ãƒ»30å•ï¼‰"""
    conn = sqlite3.connect(DB_NAME)
    cursor = conn.cursor()
    
    print("=" * 60)
    print("Pythonå•é¡Œè¿½åŠ ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆç¬¬2å¼¾ãƒ»30å•ï¼‰")
    print("=" * 60)
    
    questions = []
    
    # ==================== ãƒªã‚¹ãƒˆãƒ»ã‚¿ãƒ—ãƒ«ãƒ»ã‚»ãƒƒãƒˆï¼ˆ10å•ï¼‰ ====================
    print("[1/3] ãƒªã‚¹ãƒˆãƒ»ã‚¿ãƒ—ãƒ«ãƒ»ã‚»ãƒƒãƒˆå•é¡Œã‚’ç”Ÿæˆä¸­...")
    
    sequence_questions = [
        ("[1, 2, 3].append(4) ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"[1, 2, 3, 4]"},{"id":"B","text":"[4, 1, 2, 3]"},{"id":"C","text":"ã‚¨ãƒ©ãƒ¼"},{"id":"D","text":"None"}],
         [0], "ãƒªã‚¹ãƒˆ", "1", 5, "ãƒªã‚¹ãƒˆã®æœ«å°¾ã«è¿½åŠ ", "append"),
        
        ("[1, 2, 3].pop() ã®è¿”ã‚Šå€¤ã¯ï¼Ÿ",
         [{"id":"A","text":"3"},{"id":"B","text":"[1, 2]"},{"id":"C","text":"None"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "ãƒªã‚¹ãƒˆ", "2", 8, "æœ«å°¾ã®è¦ç´ ã‚’å‰Šé™¤ã—ã¦è¿”ã™", "pop"),
        
        ("[1, 2, 3] + [4, 5] ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"[1, 2, 3, 4, 5]"},{"id":"B","text":"[5, 7, 8]"},{"id":"C","text":"ã‚¨ãƒ©ãƒ¼"},{"id":"D","text":"[1, 2, 3, [4, 5]]"}],
         [0], "ãƒªã‚¹ãƒˆ", "1", 5, "ãƒªã‚¹ãƒˆã®é€£çµ", "é€£çµ"),
        
        ("[1, 2, 3] * 2 ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"[1, 2, 3, 1, 2, 3]"},{"id":"B","text":"[2, 4, 6]"},{"id":"C","text":"ã‚¨ãƒ©ãƒ¼"},{"id":"D","text":"6"}],
         [0], "ãƒªã‚¹ãƒˆ", "2", 8, "ãƒªã‚¹ãƒˆã®ç¹°ã‚Šè¿”ã—", "ç¹°ã‚Šè¿”ã—"),
        
        ("ã‚¿ãƒ—ãƒ« (1, 2, 3) ã¯å¤‰æ›´å¯èƒ½ï¼Ÿ",
         [{"id":"A","text":"ä¸å¯èƒ½ï¼ˆã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ï¼‰"},{"id":"B","text":"å¯èƒ½"},{"id":"C","text":"æ¡ä»¶æ¬¡ç¬¬"},{"id":"D","text":"è¦ç´ æ¬¡ç¬¬"}],
         [0], "ã‚¿ãƒ—ãƒ«", "2", 8, "ã‚¿ãƒ—ãƒ«ã¯ä¸å¤‰", "ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«"),
        
        ("set({1, 2, 2, 3}) ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"{1, 2, 3}"},{"id":"B","text":"{1, 2, 2, 3}"},{"id":"C","text":"[1, 2, 3]"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "ã‚»ãƒƒãƒˆ", "2", 8, "é‡è¤‡ã‚’å‰Šé™¤", "é›†åˆ"),
        
        ("[x*2 for x in [1,2,3]] ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"[2, 4, 6]"},{"id":"B","text":"[1, 2, 3, 1, 2, 3]"},{"id":"C","text":"6"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜", "2", 8, "ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜", "comprehension"),
        
        ("[1, 2, 3][::-1] ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"[3, 2, 1]"},{"id":"B","text":"[1, 2, 3]"},{"id":"C","text":"[-1, -2, -3]"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "ãƒªã‚¹ãƒˆ", "3", 10, "é€†é †ã‚¹ãƒ©ã‚¤ã‚¹", "ã‚¹ãƒ©ã‚¤ã‚¹"),
        
        ("'abc' in ['a', 'b', 'abc'] ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"True"},{"id":"B","text":"False"},{"id":"C","text":"ã‚¨ãƒ©ãƒ¼"},{"id":"D","text":"None"}],
         [0], "ãƒªã‚¹ãƒˆ", "1", 5, "è¦ç´ ã®å­˜åœ¨ç¢ºèª", "inæ¼”ç®—å­"),
        
        ("len([1, [2, 3], 4]) ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"3"},{"id":"B","text":"4"},{"id":"C","text":"5"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "ãƒªã‚¹ãƒˆ", "2", 8, "ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®è¦ç´ æ•°", "len"),
    ]
    
    questions.extend(sequence_questions)
    print(f"  âœ“ ãƒªã‚¹ãƒˆãƒ»ã‚¿ãƒ—ãƒ«ãƒ»ã‚»ãƒƒãƒˆ: {len(sequence_questions)}å•")
    
    # ==================== è¾æ›¸ã¨ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ï¼ˆ10å•ï¼‰ ====================
    print("[2/3] è¾æ›¸ã¨ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿å•é¡Œã‚’ç”Ÿæˆä¸­...")
    
    dict_questions = [
        ("{'a': 1, 'b': 2}.get('c', 0) ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"0"},{"id":"B","text":"None"},{"id":"C","text":"ã‚¨ãƒ©ãƒ¼"},{"id":"D","text":"'c'"}],
         [0], "è¾æ›¸", "2", 8, "ã‚­ãƒ¼ãŒãªã„å ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤", "get"),
        
        ("{'a': 1}.keys() ã®å‹ã¯ï¼Ÿ",
         [{"id":"A","text":"dict_keys"},{"id":"B","text":"list"},{"id":"C","text":"tuple"},{"id":"D","text":"set"}],
         [0], "è¾æ›¸", "2", 8, "ã‚­ãƒ¼ã®ãƒ“ãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ", "keys"),
        
        ("{**{'a': 1}, **{'b': 2}} ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"{'a': 1, 'b': 2}"},{"id":"B","text":"ã‚¨ãƒ©ãƒ¼"},{"id":"C","text":"[1, 2]"},{"id":"D","text":"None"}],
         [0], "è¾æ›¸", "3", 10, "è¾æ›¸ã®ãƒãƒ¼ã‚¸", "ã‚¢ãƒ³ãƒ‘ãƒƒã‚¯"),
        
        ("dict(a=1, b=2) ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"{'a': 1, 'b': 2}"},{"id":"B","text":"ã‚¨ãƒ©ãƒ¼"},{"id":"C","text":"[('a',1),('b',2)]"},{"id":"D","text":"None"}],
         [0], "è¾æ›¸", "2", 8, "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã§è¾æ›¸ä½œæˆ", "dict"),
        
        ("enumerate(['a','b','c']) ã®å‹•ä½œã¯ï¼Ÿ",
         [{"id":"A","text":"ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨å€¤ã®ãƒšã‚¢"},{"id":"B","text":"å€¤ã®ã¿"},{"id":"C","text":"ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ã¿"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿", "2", 8, "(index, value)ã®ã‚¿ãƒ—ãƒ«", "enumerate"),
        
        ("zip([1,2], ['a','b']) ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"[(1,'a'),(2,'b')]"},{"id":"B","text":"[1,2,'a','b']"},{"id":"C","text":"ã‚¨ãƒ©ãƒ¼"},{"id":"D","text":"None"}],
         [0], "ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿", "2", 8, "è¤‡æ•°ã®ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ã‚’ä¸¦è¡Œå‡¦ç†", "zip"),
        
        ("range(5) ã¯ä½•ã‚’è¿”ã™ï¼Ÿ",
         [{"id":"A","text":"rangeã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ"},{"id":"B","text":"[0,1,2,3,4]"},{"id":"C","text":"5"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿", "2", 8, "é…å»¶è©•ä¾¡ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹", "range"),
        
        ("reversed([1,2,3]) ã®å‹ã¯ï¼Ÿ",
         [{"id":"A","text":"reversedï¼ˆã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ï¼‰"},{"id":"B","text":"list"},{"id":"C","text":"tuple"},{"id":"D","text":"None"}],
         [0], "ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿", "3", 10, "é€†é †ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿", "reversed"),
        
        ("sorted([3,1,2]) ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"[1, 2, 3]"},{"id":"B","text":"[3, 2, 1]"},{"id":"C","text":"None"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "çµ„ã¿è¾¼ã¿é–¢æ•°", "1", 5, "æ˜‡é †ã‚½ãƒ¼ãƒˆ", "sorted"),
        
        ("filter(lambda x: x>0, [-1,0,1,2]) ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"[1, 2]"},{"id":"B","text":"[-1, 0]"},{"id":"C","text":"filter object"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [2], "ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿", "3", 10, "æ¡ä»¶ã«åˆã†è¦ç´ ã‚’æŠ½å‡ºï¼ˆã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã™ï¼‰", "filter"),
    ]
    
    questions.extend(dict_questions)
    print(f"  âœ“ è¾æ›¸ã¨ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿: {len(dict_questions)}å•")
    
    # ==================== æ–‡å­—åˆ—æ“ä½œï¼ˆ10å•ï¼‰ ====================
    print("[3/3] æ–‡å­—åˆ—æ“ä½œå•é¡Œã‚’ç”Ÿæˆä¸­...")
    
    string_questions = [
        ("'hello'.upper() ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"'HELLO'"},{"id":"B","text":"'Hello'"},{"id":"C","text":"'hello'"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "æ–‡å­—åˆ—", "1", 5, "å¤§æ–‡å­—ã«å¤‰æ›", "upper"),
        
        ("'  hello  '.strip() ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"'hello'"},{"id":"B","text":"'  hello  '"},{"id":"C","text":"'hello  '"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "æ–‡å­—åˆ—", "2", 8, "å‰å¾Œã®ç©ºç™½ã‚’å‰Šé™¤", "strip"),
        
        ("'a-b-c'.split('-') ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"['a', 'b', 'c']"},{"id":"B","text":"'abc'"},{"id":"C","text":"['a-b-c']"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "æ–‡å­—åˆ—", "2", 8, "æ–‡å­—åˆ—ã‚’åˆ†å‰²ã—ã¦ãƒªã‚¹ãƒˆåŒ–", "split"),
        
        ("'-'.join(['a','b','c']) ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"'a-b-c'"},{"id":"B","text":"['a', 'b', 'c']"},{"id":"C","text":"'abc'"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "æ–‡å­—åˆ—", "2", 8, "ãƒªã‚¹ãƒˆã‚’çµåˆ", "join"),
        
        ("'hello'.replace('l', 'L') ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"'heLLo'"},{"id":"B","text":"'heLlo'"},{"id":"C","text":"'hello'"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "æ–‡å­—åˆ—", "2", 8, "æ–‡å­—åˆ—ã‚’ç½®æ›ï¼ˆå…¨ã¦ï¼‰", "replace"),
        
        ("'hello'[1:4] ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"'ell'"},{"id":"B","text":"'hel'"},{"id":"C","text":"'ello'"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "æ–‡å­—åˆ—", "2", 8, "ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹1ã‹ã‚‰3ã¾ã§", "ã‚¹ãƒ©ã‚¤ã‚¹"),
        
        ("f'x={5}' ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"'x=5'"},{"id":"B","text":"'x={5}'"},{"id":"C","text":"ã‚¨ãƒ©ãƒ¼"},{"id":"D","text":"None"}],
         [0], "æ–‡å­—åˆ—", "2", 8, "f-stringï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿æ–‡å­—åˆ—ï¼‰", "f-string"),
        
        ("'hello'.startswith('he') ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"True"},{"id":"B","text":"False"},{"id":"C","text":"'he'"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "æ–‡å­—åˆ—", "2", 8, "æŒ‡å®šæ–‡å­—åˆ—ã§å§‹ã¾ã‚‹ã‹", "startswith"),
        
        ("'123'.isdigit() ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"True"},{"id":"B","text":"False"},{"id":"C","text":"123"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "æ–‡å­—åˆ—", "2", 8, "å…¨ã¦æ•°å­—ã‹åˆ¤å®š", "isdigit"),
        
        ("len('ğŸ') ã®çµæœã¯ï¼Ÿ",
         [{"id":"A","text":"1"},{"id":"B","text":"2"},{"id":"C","text":"4"},{"id":"D","text":"ã‚¨ãƒ©ãƒ¼"}],
         [0], "æ–‡å­—åˆ—", "3", 10, "çµµæ–‡å­—ã‚‚1æ–‡å­—", "Unicode"),
    ]
    
    questions.extend(string_questions)
    print(f"  âœ“ æ–‡å­—åˆ—æ“ä½œ: {len(string_questions)}å•")
    
    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æŒ¿å…¥
    print("\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ä¸­...")
    for q in questions:
        question_json = {
            "question": q[0],
            "options": q[1],
            "answer": q[2]
        }
        
        cursor.execute("""
            INSERT INTO questions 
            (language, question_json, category, difficulty, score, meaning, usage)
            VALUES (?, ?, ?, ?, ?, ?, ?)
        """, ("Python", json.dumps(question_json, ensure_ascii=False), 
              q[3], q[4], q[5], q[6], q[7]))
    
    conn.commit()
    
    # çµ±è¨ˆè¡¨ç¤º
    cursor.execute("SELECT COUNT(*) FROM questions WHERE language = 'Python'")
    py_count = cursor.fetchone()[0]
    
    cursor.execute("SELECT COUNT(*) FROM questions")
    total_count = cursor.fetchone()[0]
    
    conn.close()
    
    print("=" * 60)
    print("âœ“ Pythonå•é¡Œè¿½åŠ å®Œäº†ï¼ˆç¬¬2å¼¾ï¼‰ï¼")
    print("=" * 60)
    print(f"Pythonå•é¡Œæ•°: {py_count}å•")
    print(f"å…¨ä½“å•é¡Œæ•°: {total_count}å•")
    print(f"ç›®æ¨™100å•ã¾ã§æ®‹ã‚Š: {max(0, 100 - py_count)}å•")
    print("=" * 60)

if __name__ == "__main__":
    add_python_batch2()