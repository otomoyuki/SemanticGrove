import sqlite3
import json

DB_NAME = "SemanticGrove.db"

def add_ruby_33_questions_part1():
    """Rubyå•é¡Œ33å•è¿½åŠ ï¼ˆç¬¬1å¼¾ï¼š15å•â†’48å•ï¼‰"""
    conn = sqlite3.connect(DB_NAME)
    cursor = conn.cursor()
    
    print("=" * 60)
    print("Rubyå•é¡Œè¿½åŠ ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆç¬¬1å¼¾ï¼š33å•ï¼‰")
    print("=" * 60)
    
    questions = []
    
    # ==================== åŸºæœ¬æ–‡æ³•ï¼ˆ10å•ï¼‰ ====================
    print("[1/4] åŸºæœ¬æ–‡æ³•ã‚’ç”Ÿæˆä¸­...")
    
    basics = [
        ("Rubyã®å¤‰æ•°å®£è¨€ã§æ­£ã—ã„ã®ã¯ï¼Ÿ",
         [{"id":"A","text":"name = \"Ruby\"ï¼ˆå‹æŒ‡å®šä¸è¦ï¼‰"},{"id":"B","text":"var name = \"Ruby\""},{"id":"C","text":"let name = \"Ruby\""},{"id":"D","text":"string name = \"Ruby\""}],
         [0], "åŸºæœ¬æ–‡æ³•", "1", 5, "å‹•çš„å‹ä»˜ã‘", "variable"),
        
        ("å®šæ•°ã®å‘½åè¦å‰‡ã¯ï¼Ÿ",
         [{"id":"A","text":"å¤§æ–‡å­—ã§å§‹ã‚ã‚‹ï¼ˆPI, MAX_SIZEç­‰ï¼‰"},{"id":"B","text":"const ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰"},{"id":"C","text":"final ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰"},{"id":"D","text":"å°æ–‡å­—ã§å§‹ã‚ã‚‹"}],
         [0], "åŸºæœ¬æ–‡æ³•", "2", 7, "å®šæ•°ã®æ…£ç¿’", "constant"),
        
        ("ã‚·ãƒ³ãƒœãƒ«ã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":":name"},{"id":"B","text":"@name"},{"id":"C","text":"$name"},{"id":"D","text":"#name"}],
         [0], "åŸºæœ¬æ–‡æ³•", "2", 7, "ä¸å¤‰ã®è­˜åˆ¥å­", "symbol"),
        
        ("æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®ç¨®é¡ã¯ï¼Ÿ",
         [{"id":"A","text":"ã‚·ãƒ³ã‚°ãƒ«ãƒ»ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆä¸¡æ–¹å¯"},{"id":"B","text":"ã‚·ãƒ³ã‚°ãƒ«ã®ã¿"},{"id":"C","text":"ãƒ€ãƒ–ãƒ«ã®ã¿"},{"id":"D","text":"ãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆ"}],
         [0], "åŸºæœ¬æ–‡æ³•", "1", 5, "æ–‡å­—åˆ—è¡¨è¨˜", "string literal"),
        
        ("å¼å±•é–‹ã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":"\"Hello #{name}\""},{"id":"B","text":"\"Hello ${name}\""},{"id":"C","text":"\"Hello \" + name"},{"id":"D","text":"f\"Hello {name}\""}],
         [0], "åŸºæœ¬æ–‡æ³•", "2", 7, "æ–‡å­—åˆ—åŸ‹ã‚è¾¼ã¿", "interpolation"),
        
        ("ç¯„å›²ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":"1..10ï¼ˆ1ã‹ã‚‰10ã¾ã§ï¼‰"},{"id":"B","text":"1:10"},{"id":"C","text":"range(1, 10)"},{"id":"D","text":"[1..10]"}],
         [0], "åŸºæœ¬æ–‡æ³•", "2", 7, "é€£ç¶šå€¤ã®è¡¨ç¾", "range"),
        
        ("æ’ä»–çš„ç¯„å›²ã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":"1...10ï¼ˆ1ã‹ã‚‰9ã¾ã§ï¼‰"},{"id":"B","text":"1..<10"},{"id":"C","text":"1..9"},{"id":"D","text":"range(1, 10, exclusive)"}],
         [0], "åŸºæœ¬æ–‡æ³•", "2", 8, "çµ‚ç«¯ã‚’å«ã¾ãªã„ç¯„å›²", "exclusive range"),
        
        ("è¤‡æ•°è¡Œã‚³ãƒ¡ãƒ³ãƒˆã¯ï¼Ÿ",
         [{"id":"A","text":"=begin ... =end"},{"id":"B","text":"/* ... */"},{"id":"C","text":"<!-- ... -->"},{"id":"D","text":"''' ... '''"}],
         [0], "åŸºæœ¬æ–‡æ³•", "1", 5, "è¤‡æ•°è¡Œæ³¨é‡ˆ", "multiline comment"),
        
        ("nilã®æ„å‘³ã¯ï¼Ÿ",
         [{"id":"A","text":"å€¤ãŒå­˜åœ¨ã—ãªã„"},{"id":"B","text":"0"},{"id":"C","text":"ç©ºæ–‡å­—åˆ—"},{"id":"D","text":"false"}],
         [0], "åŸºæœ¬æ–‡æ³•", "1", 5, "ç„¡å€¤", "nil"),
        
        ("ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":"$global_var"},{"id":"B","text":"@@global_var"},{"id":"C","text":"@global_var"},{"id":"D","text":"global_var"}],
         [0], "åŸºæœ¬æ–‡æ³•", "2", 7, "ãƒ—ãƒ­ã‚°ãƒ©ãƒ å…¨ä½“ã®å¤‰æ•°", "global variable"),
    ]
    
    questions.extend(basics)
    print(f"  âœ“ åŸºæœ¬æ–‡æ³•: {len(basics)}å•")
    
    # ==================== åˆ¶å¾¡æ§‹æ–‡ï¼ˆ8å•ï¼‰ ====================
    print("[2/4] åˆ¶å¾¡æ§‹æ–‡ã‚’ç”Ÿæˆä¸­...")
    
    controls = [
        ("ifæ–‡ã®åŸºæœ¬å½¢ã¯ï¼Ÿ",
         [{"id":"A","text":"if condition then ... end"},{"id":"B","text":"if (condition) { ... }"},{"id":"C","text":"if condition: ..."},{"id":"D","text":"if condition do ... done"}],
         [0], "åˆ¶å¾¡æ§‹æ–‡", "1", 5, "æ¡ä»¶åˆ†å²", "if"),
        
        ("å¾Œç½®ifã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":"puts \"OK\" if valid"},{"id":"B","text":"if valid then puts \"OK\""},{"id":"C","text":"puts \"OK\" when valid"},{"id":"D","text":"valid ? puts \"OK\""}],
         [0], "åˆ¶å¾¡æ§‹æ–‡", "2", 7, "ä¿®é£¾å­å½¢å¼", "postfix if"),
        
        ("unlessã®æ„å‘³ã¯ï¼Ÿ",
         [{"id":"A","text":"ifã®å¦å®šï¼ˆã€œã§ãªã„å ´åˆï¼‰"},{"id":"B","text":"ifã¨åŒã˜"},{"id":"C","text":"ãƒ«ãƒ¼ãƒ—å‡¦ç†"},{"id":"D","text":"ä¾‹å¤–å‡¦ç†"}],
         [0], "åˆ¶å¾¡æ§‹æ–‡", "2", 7, "å¦å®šæ¡ä»¶", "unless"),
        
        ("caseæ–‡ã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":"case x when 1 then ... end"},{"id":"B","text":"switch (x) { case 1: ... }"},{"id":"C","text":"case x: when 1 ..."},{"id":"D","text":"match x { 1 => ... }"}],
         [0], "åˆ¶å¾¡æ§‹æ–‡", "2", 7, "å¤šå²åˆ†å²", "case"),
        
        ("timesãƒ¡ã‚½ãƒƒãƒ‰ã®ç”¨é€”ã¯ï¼Ÿ",
         [{"id":"A","text":"æŒ‡å®šå›æ•°ã®ç¹°ã‚Šè¿”ã—ï¼ˆ5.times doï¼‰"},{"id":"B","text":"æ™‚åˆ»å–å¾—"},{"id":"C","text":"ä¹—ç®—"},{"id":"D","text":"ã‚¿ã‚¤ãƒãƒ¼è¨­å®š"}],
         [0], "åˆ¶å¾¡æ§‹æ–‡", "2", 8, "å›æ•°æŒ‡å®šãƒ«ãƒ¼ãƒ—", "times"),
        
        ("eachãƒ¡ã‚½ãƒƒãƒ‰ã®ç”¨é€”ã¯ï¼Ÿ",
         [{"id":"A","text":"ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®å„è¦ç´ ã‚’å‡¦ç†"},{"id":"B","text":"æ¡ä»¶åˆ¤å®š"},{"id":"C","text":"æ•°å€¤ã®ç¯„å›²æŒ‡å®š"},{"id":"D","text":"ä¾‹å¤–å‡¦ç†"}],
         [0], "åˆ¶å¾¡æ§‹æ–‡", "2", 7, "åå¾©å‡¦ç†", "each"),
        
        ("whileãƒ«ãƒ¼ãƒ—ã®åŸºæœ¬å½¢ã¯ï¼Ÿ",
         [{"id":"A","text":"while condition do ... end"},{"id":"B","text":"while (condition) { ... }"},{"id":"C","text":"while condition: ..."},{"id":"D","text":"loop while condition"}],
         [0], "åˆ¶å¾¡æ§‹æ–‡", "1", 5, "å‰åˆ¤å®šãƒ«ãƒ¼ãƒ—", "while"),
        
        ("untilãƒ«ãƒ¼ãƒ—ã®æ„å‘³ã¯ï¼Ÿ",
         [{"id":"A","text":"whileã®å¦å®šï¼ˆæ¡ä»¶ãŒå½ã®é–“ç¹°ã‚Šè¿”ã—ï¼‰"},{"id":"B","text":"whileã¨åŒã˜"},{"id":"C","text":"ç„¡é™ãƒ«ãƒ¼ãƒ—"},{"id":"D","text":"å›æ•°æŒ‡å®šãƒ«ãƒ¼ãƒ—"}],
         [0], "åˆ¶å¾¡æ§‹æ–‡", "2", 7, "å¦å®šæ¡ä»¶ãƒ«ãƒ¼ãƒ—", "until"),
    ]
    
    questions.extend(controls)
    print(f"  âœ“ åˆ¶å¾¡æ§‹æ–‡: {len(controls)}å•")
    
    # ==================== ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆ8å•ï¼‰ ====================
    print("[3/4] ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”Ÿæˆä¸­...")
    
    methods = [
        ("ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©æ–¹æ³•ã¯ï¼Ÿ",
         [{"id":"A","text":"def method_name ... end"},{"id":"B","text":"function method_name() { ... }"},{"id":"C","text":"method method_name: ..."},{"id":"D","text":"func method_name() { ... }"}],
         [0], "ãƒ¡ã‚½ãƒƒãƒ‰", "1", 5, "é–¢æ•°å®šç¾©", "def"),
        
        ("ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":"def greet(name = \"Guest\")"},{"id":"B","text":"def greet(name: \"Guest\")"},{"id":"C","text":"def greet(name || \"Guest\")"},{"id":"D","text":"def greet(name default \"Guest\")"}],
         [0], "ãƒ¡ã‚½ãƒƒãƒ‰", "2", 7, "æ—¢å®šå€¤ã®è¨­å®š", "default parameter"),
        
        ("ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":"def user(name:, age: 20)"},{"id":"B","text":"def user(name, age=20)"},{"id":"C","text":"def user(String name, int age=20)"},{"id":"D","text":"def user({name, age: 20})"}],
         [0], "ãƒ¡ã‚½ãƒƒãƒ‰", "3", 9, "åå‰ä»˜ãå¼•æ•°", "keyword argument"),
        
        ("å¯å¤‰é•·å¼•æ•°ã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":"def sum(*nums)"},{"id":"B","text":"def sum(nums...)"},{"id":"C","text":"def sum(nums[])"},{"id":"D","text":"def sum(...nums)"}],
         [0], "ãƒ¡ã‚½ãƒƒãƒ‰", "2", 8, "ä»»æ„å€‹ã®å¼•æ•°", "splat operator"),
        
        ("ãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã¯ï¼Ÿ",
         [{"id":"A","text":"æœ€å¾Œã®å¼ã®å€¤ï¼ˆreturnçœç•¥å¯ï¼‰"},{"id":"B","text":"returnå¿…é ˆ"},{"id":"C","text":"void"},{"id":"D","text":"nil"}],
         [0], "ãƒ¡ã‚½ãƒƒãƒ‰", "2", 7, "æš—é»™ã®è¿”å´", "implicit return"),
        
        ("ãƒ¡ã‚½ãƒƒãƒ‰åã®æ…£ç¿’ã§æ­£ã—ã„ã®ã¯ï¼Ÿ",
         [{"id":"A","text":"çœŸå½å€¤ã‚’è¿”ã™ãƒ¡ã‚½ãƒƒãƒ‰ã¯?ã§çµ‚ã‚ã‚‹"},{"id":"B","text":"ã™ã¹ã¦å¤§æ–‡å­—"},{"id":"C","text":"ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹"},{"id":"D","text":"ãƒ‘ã‚¹ã‚«ãƒ«ã‚±ãƒ¼ã‚¹"}],
         [0], "ãƒ¡ã‚½ãƒƒãƒ‰", "2", 7, "å‘½åè¦å‰‡", "naming convention"),
        
        ("ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã®å‘½åã¯ï¼Ÿ",
         [{"id":"A","text":"!ã§çµ‚ã‚ã‚‹ï¼ˆupcase!ç­‰ï¼‰"},{"id":"B","text":"deleteã§å§‹ã¾ã‚‹"},{"id":"C","text":"_ã§å§‹ã¾ã‚‹"},{"id":"D","text":"ç‰¹ã«è¦å‰‡ãªã—"}],
         [0], "ãƒ¡ã‚½ãƒƒãƒ‰", "2", 8, "ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¤‰æ›´", "destructive method"),
        
        ("ãƒ–ãƒ­ãƒƒã‚¯å¼•æ•°ã®è¨˜è¿°ã¯ï¼Ÿ",
         [{"id":"A","text":"def method(&block)"},{"id":"B","text":"def method(block)"},{"id":"C","text":"def method(*block)"},{"id":"D","text":"def method(Block block)"}],
         [0], "ãƒ¡ã‚½ãƒƒãƒ‰", "3", 9, "å‡¦ç†ã®å—ã‘æ¸¡ã—", "block parameter"),
    ]
    
    questions.extend(methods)
    print(f"  âœ“ ãƒ¡ã‚½ãƒƒãƒ‰: {len(methods)}å•")
    
    # ==================== é…åˆ—ãƒ»ãƒãƒƒã‚·ãƒ¥ï¼ˆ7å•ï¼‰ ====================
    print("[4/4] é…åˆ—ãƒ»ãƒãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆä¸­...")
    
    collections = [
        ("é…åˆ—ã®ä½œæˆæ–¹æ³•ã¯ï¼Ÿ",
         [{"id":"A","text":"arr = [1, 2, 3]"},{"id":"B","text":"arr = array(1, 2, 3)"},{"id":"C","text":"arr = new Array(1, 2, 3)"},{"id":"D","text":"arr = {1, 2, 3}"}],
         [0], "é…åˆ—", "1", 5, "ãƒªã‚¹ãƒˆã®ä½œæˆ", "array"),
        
        ("é…åˆ—ã®è¦ç´ ã‚¢ã‚¯ã‚»ã‚¹ã¯ï¼Ÿ",
         [{"id":"A","text":"arr[0]ï¼ˆè² ã®æ·»å­—ã§æœ«å°¾ã‹ã‚‰ï¼‰"},{"id":"B","text":"arr.get(0)"},{"id":"C","text":"arr(0)"},{"id":"D","text":"arr at 0"}],
         [0], "é…åˆ—", "1", 5, "ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¢ã‚¯ã‚»ã‚¹", "array access"),
        
        ("pushãƒ¡ã‚½ãƒƒãƒ‰ã®å½¹å‰²ã¯ï¼Ÿ",
         [{"id":"A","text":"é…åˆ—ã®æœ«å°¾ã«è¦ç´ ã‚’è¿½åŠ "},{"id":"B","text":"é…åˆ—ã®å…ˆé ­ã«è¿½åŠ "},{"id":"C","text":"é…åˆ—ã‹ã‚‰è¦ç´ ã‚’å‰Šé™¤"},{"id":"D","text":"é…åˆ—ã‚’ã‚½ãƒ¼ãƒˆ"}],
         [0], "é…åˆ—", "2", 7, "æœ«å°¾è¿½åŠ ", "push"),
        
        ("ãƒãƒƒã‚·ãƒ¥ã®ä½œæˆæ–¹æ³•ã¯ï¼Ÿ",
         [{"id":"A","text":"hash = { key: \"value\" }"},{"id":"B","text":"hash = new Hash(key=\"value\")"},{"id":"C","text":"hash = [key: \"value\"]"},{"id":"D","text":"hash = (key: \"value\")"}],
         [0], "ãƒãƒƒã‚·ãƒ¥", "2", 7, "é€£æƒ³é…åˆ—", "hash"),
        
        ("ãƒãƒƒã‚·ãƒ¥ãƒ­ã‚±ãƒƒãƒˆè¨˜æ³•ã¯ï¼Ÿ",
         [{"id":"A","text":"{ \"key\" => \"value\" }"},{"id":"B","text":"{ key: \"value\" }"},{"id":"C","text":"{ key = \"value\" }"},{"id":"D","text":"{ key -> \"value\" }"}],
         [0], "ãƒãƒƒã‚·ãƒ¥", "2", 7, "å¾“æ¥ã®è¨˜æ³•", "hash rocket"),
        
        ("mapãƒ¡ã‚½ãƒƒãƒ‰ã®å½¹å‰²ã¯ï¼Ÿ",
         [{"id":"A","text":"å„è¦ç´ ã‚’å¤‰æ›ã—ãŸæ–°ã—ã„é…åˆ—ã‚’è¿”ã™"},{"id":"B","text":"æ¡ä»¶ã«åˆã†è¦ç´ ã‚’æŠ½å‡º"},{"id":"C","text":"è¦ç´ ã‚’å‰Šé™¤"},{"id":"D","text":"è¦ç´ ã‚’ã‚½ãƒ¼ãƒˆ"}],
         [0], "é…åˆ—", "2", 8, "å†™åƒ", "map"),
        
        ("selectãƒ¡ã‚½ãƒƒãƒ‰ã®å½¹å‰²ã¯ï¼Ÿ",
         [{"id":"A","text":"æ¡ä»¶ã«åˆã†è¦ç´ ã‚’æŠ½å‡º"},{"id":"B","text":"å„è¦ç´ ã‚’å¤‰æ›"},{"id":"C","text":"è¦ç´ ã‚’å‰Šé™¤"},{"id":"D","text":"è¦ç´ ã‚’ã‚½ãƒ¼ãƒˆ"}],
         [0], "é…åˆ—", "2", 8, "ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°", "select"),
    ]
    
    questions.extend(collections)
    print(f"  âœ“ é…åˆ—ãƒ»ãƒãƒƒã‚·ãƒ¥: {len(collections)}å•")
    
    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æŒ¿å…¥
    print("\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ä¸­...")
    for q in questions:
        question_json = {
            "question": q[0],
            "options": q[1],
            "answer": q[2]
        }
        
        cursor.execute("""
            INSERT INTO questions 
            (language, question_json, category, difficulty, score, meaning, usage)
            VALUES (?, ?, ?, ?, ?, ?, ?)
        """, ("Ruby", json.dumps(question_json, ensure_ascii=False), 
              q[3], q[4], q[5], q[6], q[7]))
    
    conn.commit()
    
    # çµ±è¨ˆè¡¨ç¤º
    cursor.execute("SELECT COUNT(*) FROM questions WHERE language = 'Ruby'")
    ruby_count = cursor.fetchone()[0]
    
    cursor.execute("SELECT COUNT(*) FROM questions")
    total_count = cursor.fetchone()[0]
    
    conn.close()
    
    print("\n" + "=" * 60)
    print(f"âœ… Ruby ç¬¬1å¼¾å®Œäº†: {ruby_count}å•")
    print("=" * 60)
    print(f"Rubyå•é¡Œæ•°: 15å• â†’ {ruby_count}å•ï¼ˆ+33å•ï¼‰")
    print(f"å…¨ä½“å•é¡Œæ•°: {total_count}å•")
    print("\nã€è¿½åŠ å†…å®¹ã€‘")
    print("  âœ“ åŸºæœ¬æ–‡æ³•: 10å•")
    print("  âœ“ åˆ¶å¾¡æ§‹æ–‡: 8å•")
    print("  âœ“ ãƒ¡ã‚½ãƒƒãƒ‰: 8å•")
    print("  âœ“ é…åˆ—ãƒ»ãƒãƒƒã‚·ãƒ¥: 7å•")
    print("\nğŸ¯ æ¬¡å›: ç¬¬2å¼¾ã§æ®‹ã‚Š32å•è¿½åŠ  â†’ 80å•é”æˆ")
    print("=" * 60)

if __name__ == "__main__":
    add_ruby_33_questions_part1()