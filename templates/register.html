<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新規登録 - SemanticField</title>
    <link rel="stylesheet" href="/static/register.css">
    <style>
        /* 既存のCSSがない場合の基本スタイル */
        .error-message {
            background: #fee;
            color: #c33;
            padding: 12px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }
        .success-message {
            background: #efe;
            color: #3c3;
            padding: 12px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }
    </style>
</head>
<body>
    <div class="register-container">
        <!-- ヘッダー -->
        <div class="register-header">
            <a href="/" class="back-button">← トップページに戻る</a>
            <h1>🌿 SemanticField</h1>
            <h2>新規登録</h2>
            <p>学び、創造し、交流しよう</p>
            <div class="bonus-badge">🎁 登録ボーナス: 10 SG プレゼント！</div>
        </div>

        <!-- 登録フォーム -->
        <form id="registerForm" class="register-form">
            <!-- ユーザー名 -->
            <div class="form-group">
                <label for="username">
                    <span class="label-icon">👤</span>
                    ユーザー名 <span class="required">*</span>
                </label>
                <input 
                    type="text" 
                    id="username" 
                    name="username" 
                    required
                    minlength="3"
                    maxlength="20"
                    placeholder="半角英数字3〜20文字"
                    autocomplete="username"
                >
                <small class="help-text">英数字とアンダースコアのみ使用できます</small>
            </div>

            <!-- メールアドレス -->
            <div class="form-group">
                <label for="email">
                    <span class="label-icon">📧</span>
                    メールアドレス <span class="required">*</span>
                </label>
                <input 
                    type="email" 
                    id="email" 
                    name="email" 
                    required
                    placeholder="example@email.com"
                    autocomplete="email"
                >
                <small class="help-text">パスワード再設定に使用します</small>
            </div>

            <!-- 表示名 -->
            <div class="form-group">
                <label for="displayName">
                    <span class="label-icon">✨</span>
                    表示名 <span class="required">*</span>
                </label>
                <input 
                    type="text" 
                    id="displayName" 
                    name="displayName" 
                    required
                    maxlength="30"
                    placeholder="他のユーザーに表示される名前"
                >
                <small class="help-text">日本語OK、30文字まで</small>
            </div>

            <!-- パスワード -->
            <div class="form-group">
                <label for="password">
                    <span class="label-icon">🔒</span>
                    パスワード <span class="required">*</span>
                </label>
                <div class="password-input-wrapper">
                    <input 
                        type="password" 
                        id="password" 
                        name="password" 
                        required
                        minlength="8"
                        placeholder="8文字以上"
                        autocomplete="new-password"
                    >
                    <button type="button" class="toggle-password" id="togglePassword">
                        👁️
                    </button>
                </div>
                <div class="password-strength" id="passwordStrength"></div>
                <small class="help-text">8文字以上、英数字を含むことを推奨</small>
            </div>

            <!-- パスワード確認 -->
            <div class="form-group">
                <label for="passwordConfirm">
                    <span class="label-icon">🔒</span>
                    パスワード（確認） <span class="required">*</span>
                </label>
                <div class="password-input-wrapper">
                    <input 
                        type="password" 
                        id="passwordConfirm" 
                        name="passwordConfirm" 
                        required
                        placeholder="もう一度入力してください"
                        autocomplete="new-password"
                    >
                    <button type="button" class="toggle-password" id="togglePasswordConfirm">
                        👁️
                    </button>
                </div>
                <small class="help-text" id="passwordMatch"></small>
            </div>

            <!-- 利用規約 -->
            <div class="terms-section">
                <h3>📜 利用規約とコミュニティガイドライン</h3>
                
                <div class="terms-box">
                    <div class="terms-scroll">
                        <h4>SemanticField 利用規約（抜粋）</h4>
                        
                        <div class="terms-summary">
                            <p><strong>第1条 総則</strong></p>
                            <p>本規約は、SemanticFieldの利用に関する条件を定めるものです。ユーザーは、本規約に同意の上、本サービスを利用するものとします。</p>
                            
                            <p><strong>第4条 禁止事項（抜粋）</strong></p>
                            <ul>
                                <li>誹謗中傷、侮辱、脅迫</li>
                                <li>差別的な発言</li>
                                <li>著作権侵害</li>
                                <li>スパム行為</li>
                                <li>不正行為</li>
                            </ul>
                            
                            <p><strong>第5条 違反時の措置</strong></p>
                            <p>禁止事項に違反した場合、警告→投稿制限→アカウント停止→永久削除の段階的措置を講じます。</p>
                            
                            <p><strong>⚠️ 重要</strong></p>
                            <p>アカウント削除時、保有するSGポイント・課金履歴はすべて失効します。</p>
                        </div>
                    </div>
                    
                    <a href="/terms?from=register" target="_blank" class="terms-link">
                        📖 利用規約全文を読む（新しいタブで開く）
                    </a>
                </div>

                <!-- 同意チェックボックス -->
                <div class="terms-checkbox">
                    <label for="agreeTerms" class="checkbox-label">
                        <input 
                            type="checkbox" 
                            id="agreeTerms" 
                            name="agreeTerms" 
                            required
                        >
                        <span class="checkmark"></span>
                        <span class="checkbox-text">
                            <strong>利用規約とコミュニティガイドラインに同意します</strong>
                            <small>（必須）</small>
                        </span>
                    </label>
                </div>
            </div>

            <!-- メッセージ -->
            <div id="successMessage" class="success-message"></div>
            <div id="errorMessage" class="error-message"></div>

            <!-- 登録ボタン -->
            <button type="submit" id="submitBtn" class="submit-btn" disabled>
                ✨ アカウントを作成する
            </button>

            <!-- ログインリンク -->
            <div class="login-link">
                <p>すでにアカウントをお持ちですか？</p>
                <a href="/login">ログインはこちら</a>
            </div>
        </form>

        <!-- フッター -->
        <div class="register-footer">
            <p>&copy; 2025 SemanticField. All rights reserved.</p>
        </div>
    </div>

    <script src="/static/register-enhanced.js"></script>
</body>
</html>